{% extends 'base.html' %}
{% load static %}

{% block title %}å‘å¸ƒåšå®¢ - MyBlog{% endblock %}

{% block head %}
<script src="{% static 'jquery/jquery-3.7.1.min.js' %}"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css">
<script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
<script src="{% static 'js/pub_blog.js' %}?v=6"></script>
<style>
    /* EasyMDE Customization */
    .EasyMDEContainer .CodeMirror {
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        box-shadow: none;
        font-family: 'Inter', sans-serif;
        font-size: 16px;
    }

    .editor-toolbar {
        border-radius: 12px 12px 0 0;
        border: 1px solid #e2e8f0;
        border-bottom: none;
        background: #f8fafc;
    }

    .editor-statusbar {
        display: none;
    }

    /* Emoji Picker Popup */
    #emoji-popup {
        position: absolute;
        z-index: 1000;
        display: none;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        border-radius: 8px;
    }

    emoji-picker {
        width: 350px;
        height: 400px;
        --border-radius: 8px;
        --background: #ffffff;
    }
</style>
{% endblock %}

{% block main %}
<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="card p-4 p-md-5 animate-fade-up">
            <h2 class="mb-4 fw-bold text-gradient">å‘å¸ƒåšå®¢</h2>
            <form action="" method="POST">
                {% csrf_token %}
                <div class="mb-4">
                    <label class="form-label fw-medium">æ ‡é¢˜</label>
                    <input type="text" name="title" class="form-control" placeholder="è¯·è¾“å…¥åšå®¢æ ‡é¢˜">
                </div>
                <div class="mb-4">
                    <label class="form-label fw-medium">åšå®¢å°é¢</label>
                    <input type="file" name="cover" class="form-control" accept="image/*">
                </div>
                <div class="mb-4">
                    <label class="form-label fw-medium">åˆ†ç±»</label>
                    <select name="category" class="form-select" id="category-select">
                        {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-4">
                    <label class="form-label fw-medium">å†…å®¹ (Markdown)</label>
                    <div class="mb-2">
                        <input class="form-control" type="file" id="markdown-upload" accept=".md">
                        <div class="form-text">æˆ–è€…ä¸Šä¼ æœ¬åœ° Markdown æ–‡ä»¶</div>
                    </div>
                    <textarea id="markdown-editor" name="content"></textarea>
                </div>
                <div class="mb-4">
                    <label for="tags" class="form-label fw-medium">æ ‡ç­¾</label>
                    <input type="text" class="form-control" id="tags" name="tags"
                        placeholder="è¾“å…¥æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš” (ä¾‹å¦‚: Python, Django, Web)">
                </div>
                <div class="text-end">
                    <button class="btn btn-primary-gradient px-5" id="submit-btn" type="button">
                        <span class="me-1">ğŸš€</span> å‘å¸ƒåšå®¢
                    </button>
                </div>
                <!-- Emoji Popup Container -->
                <div id="emoji-popup">
                    <emoji-picker></emoji-picker>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}